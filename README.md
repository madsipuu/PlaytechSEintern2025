# Java Developer Test Assignment

## Introduction
In the mystical land of Java, the kingdom's Grand Casino has been bustling with activity. The High Council of Playtech 
has tasked you, a brave intern, with a crucial mission. As the bureaucracy has grown in time, they need a dynamic system
that will allow them to easily process their business data in different ways to get a good overview of happenings at the
Grand. Your mission is to create a program that will transform the data from the Grand’s database into reports that will
be presented to the High Council. Based on the reports provided by you, they will make important decisions about the 
Grand Casino… And about you…

## Restrictions

- **The structure of the provided source folder should be respected** (i.e. the package structure and class names should not be changed for the provided files).
- **Only the dependencies from pom.xml are allowed, otherwise utilize only what is available in the JDK (Java Development Kit).**
- **Java version up to 21 LTS should be used.**
- **Maven is required to build the project.**

### Setting up the project with maven

1. Install maven

    If you don't have Maven installed, install it from the official website - https://maven.apache.org/install.html
2. Navigate to the Project Directory

    Open a terminal and navigate to the root directory of the project where the pom.xml file is located.

3. Build the Project

    Run the following command to build the project and download the necessary dependencies:

    ```mvn install```
4. Run the Project

## Task

Implement a program that receives 3 absolute paths arguments:
 - input csv file path  (see "[Input Data](#input-data)")
 - report xml file path (see "[Report XML](#report-xml)")
 - output directory path (see "[Output](#output)")

Based on these arguments the program will have to transform the provided data as well as generate output with the correct fields and file format to the given output directory. Example input directory has been provided in the assignment directory.

We have provided the code for XML parsing with the JAXB API, you can use it as a starting point or create your own logic from the scratch. **The project structure (package and class naming) should still be respected when starting from scratch**.

<a name="input-data"></a>
### Input Data

For simplicity the input data is a .csv file that represents data from the database. 
This data is to be used together with the report xml (see more under [Report](#report)) to read and transform it.

<a name="report-xml"></a>
### Report XML
Report xml is a file that contains the configuration for the reports that the program will generate.

It contains of 5 sections:
 - Report name
 - Report output format
 - Report inputs
 - Report outputs
 - Report transformers

Report sections are explained below.

#### Report name
Report name is the name of the output file that is generated by the program.

Report name is defined with the following example node:

```xml
<reportName>DailyBetWinLossReport</reportName>
```

#### Report output format
Report output format is the format that the output file is generated in. 

For simplicity the only supported format will be:
- [JSONL](https://jsonlines.org/examples/#:~:text=Self%2Ddescribing%20data) (**Not to confuse with JSON**)

Report output format is defined with the following example node:
```xml
<outputFormat>JSONL</outputFormat>
```

#### Report inputs
Report inputs are names of the columns from the input data file with the corresponding type of the column. Report inputs main objective is to make the parsing of data easier.

Report inputs are defined with the following example node:
```xml
<inputs>
    <input>
        <name>PlayerID</name>
        <type>STRING</type>
    </input>
</inputs>
```

Types of the input columns:
 - STRING
 - INTEGER
 - DOUBLE
 - DATE (ISO-8601, without time and zone)
 - DATETIME (ISO-8601, with time and zone)

#### Report outputs
Much like report inputs, the report outputs are the names of the output fields with their corresponding types.

**These are the only fields that the output file must contain.**

Report outputs are defined with the following example node:
```xml
<outputs>
    <output>
        <name>StartDate</name>
        <type>DATE</type>
    </output>
</outputs>
```

Types of the output columns (same as for inputs):
- STRING
- INTEGER
- DOUBLE
- DATE (ISO-8601, without time and zone)
- DATETIME (ISO-8601, with time and zone)

#### Report transformers
Transformers are used for data manipulation. Listed below are the transformers that need to be implemented and must be supported.

Find examples of all transformers below:
- [StringFormatterTransformer](#stringformattertransformer)
- [DateTimeFormatterTransformer](#datetimeformattertransformer)
- [OrderingTransformer](#orderingtransformer)
- [MathOperationTransformer](#mathoperationtransformer)
- [AggregatorTransformer](#aggregatortransformer)

<a name="stringformattertransformer"></a>
##### StringFormatterTransformer
The StringFormatterTransformer is used to format multiple input columns into a single string output. It takes a format string and a list of input columns, and produces a formatted string based on the specified format.

Explanation of the StringFormatterTransformer parameters:
- Inputs: The columns to be formatted.
- Format: The format string that specifies how the inputs should be combined.
- Output: The output column that the result is stored in.

Must support input column types:
 - STRING
 - INTEGER
 - DOUBLE

```xml
<transformer>
    <name>StringFormatter</name>
    <parameters>
        <inputs>
            <input>input1</input>
            <input>input2</input>
        </inputs>
        <format>%.2f %s</format>
        <output>output1</output>
    </parameters>
</transformer>
```

<a name="datetimeformattertransformer"></a>
##### DateTimeFormatterTransformer
The DateTimeFormatterTransformer is used to format date and datetime columns into a specified string format. It takes a date or datetime column, applies the specified format, and outputs the formatted date or datetime as a string.

Explanation of the DateTimeFormatterTransformer parameters:
- Input: The date or datetime column to be formatted.
- Format: The format string that specifies how the date or datetime should be formatted.
- Output: The output column that the result is stored in.

Must support column types:
 - DATE
 - DATETIME

```xml
<transformer>
    <name>DateTimeFormatter</name>
    <parameters>
        <input>StartTime</input>
        <format>yyyy-MM-dd</format>
        <output>StartDate</output>
    </parameters>
</transformer>
```


<a name="orderingtransformer"></a>
##### OrderingTransformer
The OrderingTransformer is used to sort the data based on a specified column and order type (ascending or descending). It takes an input column and an order type, and sorts the data accordingly.

Explanation of the OrderingTransformer parameters:
- Input: The column to be used for sorting.
- Order: The order type (ASC for ascending, DESC for descending).

Must support column types:
 - STRING
 - DATE
 - DATETIME

Order types: 
 - ASC
 - DESC

```xml
<transformer>
    <name>Ordering</name>
    <parameters>
        <input>StartDate</input>
        <order>ASC</order>
    </parameters>
</transformer>
```

<a name="mathoperationtransformer"></a>
##### MathOperationTransformer
The MathOperationTransformer is used to perform mathematical operations on multiple input columns and produce a single output column. It takes a list of input columns, an operation type, and produces the result of the operation.

Explanation of how the MathOperationTransformer parameters:
- Inputs: The columns to be used in the mathematical operation.
- Operation: The type of mathematical operation to be performed (ADD or SUBTRACT).
- Output: The output column that the result is stored in.

Must support column types:
 - INTEGER
 - DOUBLE

Operation
 - ADD
 - SUBTRACT
```xml
<transformer>
    <name>MathOperation</name>
    <parameters>
        <inputs>
            <input>input1</input>
            <input>input2</input>
        </inputs>
        <operation>ADD</operation>
        <output>sumOfBoth</output>
    </parameters>
</transformer>
```

<a name="aggregatortransformer"></a>
##### AggregatorTransformer

The AggregatorTransformer is used to perform aggregation operations on data, such as calculating the sum or average of specific columns. It groups the data by a specified column and then applies the aggregation methods to other columns.

Here is a step-by-step explanation of how the AggregatorTransformer works:
- Group By: The data is grouped by the specified column (e.g., StartDate).
- Aggregate By: For each group, the specified aggregation methods (e.g., SUM, AVG) are applied to the specified columns (e.g., BetAmount, WinAmount).
- Output: The results of the aggregation are stored in new columns.

Must support column types: 
 - INTEGER
 - DOUBLE

Aggregation methods:
 - SUM
 - AVG

```xml
<transformer>
    <name>Aggregator</name>
    <parameters>
        <groupBy>StartDate</groupBy>
        <aggregateBys>
            <aggregateBy>
                <input>BetAmount</input>
                <method>SUM</method>
                <output>BetAmountSum</output>
            </aggregateBy>
            <aggregateBy>
                <input>WinAmount</input>
                <method>SUM</method>
                <output>WinAmountSum</output>
            </aggregateBy>
            <aggregateBy>
                <input>LossAmount</input>
                <method>SUM</method>
                <output>LossAmountSum</output>
            </aggregateBy>
        </aggregateBys>
    </parameters>
</transformer>
```

<a name="output"></a>
### Output
Output directory will contain any report that the program generates. **The program should output only one file**.

Example output directory has been provided in the assignment directory. **The directory also contains the corresponding result file for the provided input directory** (to provide clarity on the task).

## Additional notes

- Transformers are not limited to the mentioned ones, feel free to create any additional transformers if needed.
- Input data can contain faulty lines (e.g. column count is not the same as header count, column is not corresponding to the type), these lines should be skipped and the program should not fail.
- Reports do not have any mistakes in them, they can be parsed as is without any exception checking.


------

**How to submit your assignment:**

- We expect zip file that contains all source code files (.java).
- You can also include any testing input files you created.
- Email link to the solution back to us by 03.04.2025 as a reply to the original email the assignment was sent from. Don't mind it's from notifications@smartrecruiters.com, we will get it.
- Don't send solution as attachment to email. Send it to us via link to Google Drive or some other online file sharing platform.

Feel free to reach out if you need any further clarification. We encourage all submissions, even if they aren't fully completed. Good luck!
